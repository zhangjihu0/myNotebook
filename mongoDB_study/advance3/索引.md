### 索引 
#### 什么索引
特殊的数据结构，按顺序保存文档中的一个或多个指定.使用B-Tree索引， 方便范围查询和匹配查询。
### 建立索引（单建索引）
#### 插入数据
for(var i =0;i<300000;i++){db.persons.insert({name:i})}
#### 创建匿名索引 //系统自动生成索引
db.person.ensureIndex({name:1})
#### 创建命名索引
db.person.ensureIndex({name:-1},{name:'nameIndex'})
#### 分析索引执行过程
db.persons().find({name；1}).explain();
#### 指定使用的索引
db.persons.find({name:1}).hint({name:-1}).explain()
#### 创建唯一索引并删除重复记录
name:索引名称；
unique:true 是否唯一值
dropDups:true 删除是
db.person.ensureIndex({"name":1},{"name":"indexname","unique":true,dropDups:true})
#### 删除所有索引
db.runcommand({dropIndexes:'person',index:'*'});
#### 后台创建索引 异步执行后返回
db.person.ensureIndex({"name":1},{"name":"indexname","unique":true,"background":true})
### 建立多键索引 
// 可以自动对数组进行索引
db.person.insert({hobby:['basketball','football','pingpang']})
db.ensureIndex({hobby:1})
find({},{})//第一个只是查询值，第二值是返回值，1返回，0不返回；
db.person.find({hobby:'football'},{hobby:1,_id:0})
### 复合索引
db.person.insert({a:1,b:2})
db.person.insert({a:2,b:3})
db.p.ensureIndex({a:1,b:1});
db.p.find({a:1,b:2},{a:1,_id:0}).explain();
查询的条件不止一个，需要用
### 过期索引
在一定时间后会过期，过期后相应的数据被删除
session 日志 缓存 临时文件
db.p2.insert({time:new Date()});
db.p2.insert({time:new date()});
//索引10秒后删除索引以及数据
db.p2.insert({time:1},{expireAfterSeconds:10})
// 索引字段的值必须Date 对象, 不能是其他类型比如时间戳
// 删除时间不是准确，没60秒跑一次。删除也需要时间，所以有误差
### 二维索引 
